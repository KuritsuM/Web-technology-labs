<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>lab4_kaydash</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <link rel="stylesheet" href="../css/menu.css">
    <link rel="stylesheet" href="../css/resumetable.css">
    <link rel="stylesheet" href="css/photoalbum.css">
    <link rel="stylesheet" href="css/bigphoto.css">
	<script src="https://unpkg.com/vue@next"></script>

</head>
<body>
<header class="menu">
    <ul class="menu-puncts">
        <li><a href="../index.html">Резюме</a></li>
        <li><a href="../hobby/hobby.html">Мои интересы</a></li>
        <li><a href="../about-me/about.html">Обо мне</a></li>
        <li><a href="../studies/studies.html">Учёба</a></li>
        <li><a href="../test/test.html">Тест по дисциплине</a></li>
        <li><a href="../contact/contact.html">Контакты</a></li>
        <li class="active"><a href="#">Фотоальбом</a></li>
    </ul>
</header>
<div class="photos">
	<div id="app">
		<album-item
v-for="(photo,i) in photos"
:key="i"
:package="photo"
>
</album-item>

	</div>
</div>
<script src="https://unpkg.com/vue@next"></script>
<script>
	const PhotoAlbum = {
	data () {
		return {
			photos: [
				{	
					title: 'Aska',
					photo: './res/aska.jpg',
					alt: 'Фото Кирю Аски Лэнгли',
					comment: 'Это фото Асочки, моя жена, кстати!'
				},
				{
					title: 'Rey',
					photo: 'res/rey.jpg',
					alt: 'Фото Рэй Аянами',
					comment: 'Это фото Рэй, моя вице-жена, кстати!'
				},
				{
					title: 'Eva-01',
					photo: './res/eva-01.jpg',
					alt: 'Фото Евы-01',
					comment: 'Это фото Евы, СИНДЗИ, ЛЕЗЬ В РОБОТА!!!!'
				},
			]
		}
	}
	};
	const app = Vue.createApp(PhotoAlbum);

app.component("album-item", {
  props: ["package"],
  emits: ["click"],
  template: `
        <span class="album-item" @click="$emit('click')">
            <img :src="package.photo" :alt="package.alt">
        </span>
    `,
  data() {
    return {
      isOpened: false
    };
  }
});

app.component("img-popup", {
  props: ["photos", "index"],
  emits: ["close"],
  template: `
        <teleport to="body">
        <div class="img_popup" @click.self="$emit('close')">
            <button type="button" class="to_left" @click="previous">&#8249;</button>
            <div class="content">
                <img :src="photos[id].photo" :alt="photos.alt">
                <div class="text">
                    <h2>{{photos[id].title}}</h2>
                    <p>{{photos[id].comment}}</p>
                </div>
            </div>
            <button type="button" class="to_right" @click="next">&#8250;</button>
        </div>
    </teleport>
    `,
  data() {
    return {
      id: this.$props.index
    };
  },
  methods: {
    previous: function () {
      if (!this.id) {
        this.id = this.$props.photos.length - 1;
      } else {
        this.id--;
      }
    },
    next: function () {
      if (this.id === this.$props.photos.length - 1) {
        this.id = 0;
      } else {
        this.id++;
      }
    }
  }
});

app.mount("#app");

</script>
</body>
</html>